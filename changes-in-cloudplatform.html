<!doctype html>
<html lang="en" class="govuk-template no-js">
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <title>Change Process in Cloud Platform - Cloud Platform Runbooks</title>

    <link href="stylesheets/manifest.css" rel="stylesheet" />

    <link rel="canonical" href="https://runbooks.cloud-platform.service.justice.gov.uk/changes-in-cloudplatform.html">

      <meta name="robots" content="noindex" />
      <meta name="twitter:card" content="summary" />
      <meta name="twitter:domain" content="runbooks.cloud-platform.service.justice.gov.uk" />
      <meta name="twitter:image" content="https://runbooks.cloud-platform.service.justice.gov.uk/images/govuk-large.png" />
      <meta name="twitter:title" content="Change Process in Cloud Platform - Cloud Platform Runbooks" />
      <meta name="twitter:url" content="https://runbooks.cloud-platform.service.justice.gov.uk/changes-in-cloudplatform.html" />

      <meta property="og:image" content="https://runbooks.cloud-platform.service.justice.gov.uk/images/govuk-large.png" />
      <meta property="og:site_name" content="Cloud Platform Runbooks" />
      <meta property="og:title" content="Change Process in Cloud Platform" />
      <meta property="og:type" content="object" />
      <meta property="og:url" content="https://runbooks.cloud-platform.service.justice.gov.uk/changes-in-cloudplatform.html" />

    
  </head>

  <body class="govuk-template__body">
    <script>document.body.className = ((document.body.className) ? document.body.className + ' js-enabled' : 'js-enabled');</script>

    <div class="app-pane">
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link" data-module="govuk-skip-link">Skip to main content</a>

        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
  <div class="govuk-header__container govuk-header__container--full-width">
    <div class="govuk-header__logo">
      <a href="/" class="govuk-header__link govuk-header__link--homepage">
        <span class="govuk-header__product-name">
          Cloud Platform Runbooks
        </span>
      </a>
    </div>
    <div class="govuk-header__content">
      <nav class="govuk-header__navigation govuk-header__navigation--end" aria-label="Menu">
        <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" aria-label="Show or hide menu">Menu</button>
        <ul id="navigation" class="govuk-header__navigation-list">
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="mailto:platforms+runbooks@digital.justice.gov.uk?subject=Runbooks+feedback">Feedback / Report a problem</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/">Documentation</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="https://github.com/ministryofjustice/cloud-platform/tree/main/runbooks">GitHub</a>
            </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

      </div>

        <div id="toc-heading" class="toc-show fixedsticky">
          <button type="button" class="toc-show__label js-toc-show" aria-controls="toc">
            Table of contents <span class="toc-show__icon"></span>
          </button>
        </div>

      <div class="app-pane__body" data-module="in-page-navigation">
          <div class="app-pane__toc">
            <div class="toc" data-module="table-of-contents" tabindex="-1" aria-label="Table of contents" role="dialog">
              <div class="search" data-module="search" data-path-to-site-root="./">
  <form action="https://www.google.co.uk/search" method="get" role="search" class="search__form govuk-!-margin-bottom-4">
    <input type="hidden" name="as_sitesearch" value="https://runbooks.cloud-platform.service.justice.gov.uk"/>
    <label class="govuk-label search__label" for="search" aria-hidden="true">
      Search (via Google)
    </label>
    <input
      type="text"
      id="search" name="q"
      class="govuk-input govuk-!-margin-bottom-0 search__input"
      aria-controls="search-results"
      placeholder="Search">
    <button type="submit" class="search__button">Search</button>
  </form>
</div>

              <button type="button" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></button>
              <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading" data-module="collapsible-navigation">
                      <ul>
  <li>
    <a href="./index.html"><span>Cloud Platform Runbooks</span></a>
  </li>
  <li>
    <a href="./how-we-work.html"><span>How We Work</span></a>
    <ul>
      <li>
        <a href="./how-we-work.html#getting-help"><span>Getting Help</span></a>
      </li>
      <li>
        <a href="./how-we-work.html#sprints-and-ceremonies"><span>Sprints and ceremonies</span></a>
        <ul>
          <li>
            <a href="./how-we-work.html#firebreak"><span>Firebreak</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="./how-we-work.html#story"><span>Story</span></a>
        <ul>
          <li>
            <a href="./how-we-work.html#story-points"><span>Story points</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="./how-we-work.html#the-board-tickets"><span>The Board / Tickets</span></a>
        <ul>
          <li>
            <a href="./how-we-work.html#adding-tickets"><span>Adding tickets</span></a>
          </li>
          <li>
            <a href="./how-we-work.html#making-changes-to-code"><span>Making changes to code</span></a>
          </li>
          <li>
            <a href="./how-we-work.html#reviewing-merging-prs"><span>Reviewing/Merging PRs</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="./how-we-work.html#the-hammer-of-justice"><span>The 🔨 Hammer of Justice</span></a>
        <ul>
          <li>
            <a href="./how-we-work.html#backlog-tickets"><span>Backlog Tickets</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="./how-we-work.html#documentation"><span>Documentation</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./how-to-update-gems.html"><span>How to update gem files in technical documentation</span></a>
    <ul>
      <li>
        <a href="./how-to-update-gems.html#when-to-update"><span>When to update</span></a>
      </li>
      <li>
        <a href="./how-to-update-gems.html#how-to-update"><span>How to update</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./incident-process.html"><span>Incident Process</span></a>
    <ul>
      <li>
        <a href="./incident-process.html#1-confirm-that-the-event-constitutes-an-incident"><span>1. Confirm that the event constitutes an incident</span></a>
      </li>
      <li>
        <a href="./incident-process.html#2-declare-the-incident"><span>2. Declare the incident</span></a>
        <ul>
          <li>
            <a href="./incident-process.html#examples"><span>Examples</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="./incident-process.html#3-assign-roles"><span>3. Assign roles</span></a>
        <ul>
          <li>
            <a href="./incident-process.html#3-1-incident-lead"><span>3.1 Incident Lead</span></a>
          </li>
          <li>
            <a href="./incident-process.html#3-2-scribe"><span>3.2 Scribe</span></a>
          </li>
          <li>
            <a href="./incident-process.html#3-3-communications-lead"><span>3.3 Communications Lead</span></a>
          </li>
          <li>
            <a href="./incident-process.html#transferring-roles"><span>Transferring roles</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="./incident-process.html#4-fix-the-problem"><span>4. Fix the problem</span></a>
      </li>
      <li>
        <a href="./incident-process.html#5-end-the-incident"><span>5. End the incident</span></a>
      </li>
      <li>
        <a href="./incident-process.html#6-post-incident-procedure"><span>6. Post-incident procedure</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./incident-log.html"><span>Incident Log</span></a>
    <ul>
      <li>
        <a href="./incident-log.html#q4-2022-october-december"><span>Q4 2022 (October-December)</span></a>
        <ul>
          <li>
            <a href="./incident-log.html#incident-on-2022-11-15-16-03-prometheus-eks-live-down"><span>Incident on 2022-11-15 16:03 - Prometheus eks-live DOWN.</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="./incident-log.html#q3-2022-july-september"><span>Q3 2022 (July-September)</span></a>
        <ul>
          <li>
            <a href="./incident-log.html#incident-on-2022-07-11-09-33-slow-performance-for-25-of-ingress-traffic"><span>Incident on 2022-07-11 09:33 - Slow performance for 25% of ingress traffic</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="./incident-log.html#q1-2022-january-to-march"><span>Q1 2022 (January to March)</span></a>
        <ul>
          <li>
            <a href="./incident-log.html#incident-on-2022-03-10-11-48-all-ingress-resources-using-apps-live-cloud-platform-urls-showing-certificate-issue"><span>Incident on 2022-03-10 11:48 - All ingress resources using *.apps.live.cloud-platform urls showing certificate issue</span></a>
          </li>
          <li>
            <a href="./incident-log.html#incident-on-2022-01-22-11-57-some-dns-records-got-deleted-at-the-weekend"><span>Incident on 2022-01-22 11:57 - some DNS records got deleted at the weekend</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="./incident-log.html#q4-2021-october-to-december"><span>Q4 2021 (October to December)</span></a>
        <ul>
          <li>
            <a href="./incident-log.html#incident-on-2021-11-05-modsec-ingress-controller-is-erroring"><span>Incident on 2021-11-05 - ModSec ingress controller is erroring</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="./incident-log.html#q3-2021-july-september"><span>Q3 2021 (July-September)</span></a>
        <ul>
          <li>
            <a href="./incident-log.html#incident-on-2021-09-30-ssl-certificate-issue-in-browsers"><span>Incident on 2021-09-30 - SSL Certificate Issue in browsers</span></a>
          </li>
          <li>
            <a href="./incident-log.html#incident-on-2021-09-04-22-05-pingdom-check-prometheus-cloud-platform-healthcheck-is-down"><span>Incident on 2021-09-04 22:05 - Pingdom check Prometheus Cloud-Platform - Healthcheck is DOWN</span></a>
          </li>
          <li>
            <a href="./incident-log.html#incident-on-2021-07-12-15-24-all-ingress-resources-using-apps-live-1-domain-names-stop-working"><span>Incident on 2021-07-12 15:24 - All ingress resources using *apps.live-1 domain names stop working</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="./incident-log.html#q2-2021-april-june"><span>Q2 2021 (April-June)</span></a>
        <ul>
          <li>
            <a href="./incident-log.html#incident-on-2021-06-09-12-47-all-users-are-unable-to-create-new-ingress-rules-following-bad-modsec-ingress-controller-upgrade"><span>Incident on 2021-06-09 12:47 - All users are unable to create new ingress rules, following bad ModSec Ingress-controller upgrade</span></a>
          </li>
          <li>
            <a href="./incident-log.html#incident-on-2021-05-10-12-15-apply-pipeline-downtime-due-to-accidental-destroy-of-manager-cluster"><span>Incident on 2021-05-10 12:15 - Apply Pipeline downtime due to accidental destroy of Manager cluster</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="./incident-log.html#q1-2021-january-march"><span>Q1 2021 (January - March)</span></a>
        <ul>
          <li>
            <a href="./incident-log.html#no-incidents-declared"><span>No incidents declared</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="./incident-log.html#q4-2020-october-december"><span>Q4 2020 (October - December)</span></a>
        <ul>
          <li>
            <a href="./incident-log.html#incident-on-2020-10-06-09-07-intermittent-quot-micro-downtimes-quot-on-various-services-using-dedicated-ingress-controllers"><span>Incident on 2020-10-06 09:07 - Intermittent “micro-downtimes” on various services using dedicated ingress controllers</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="./incident-log.html#q3-2020-july-september"><span>Q3 2020 (July - September)</span></a>
        <ul>
          <li>
            <a href="./incident-log.html#incident-on-2020-09-28-13-10-termination-of-nodes-updating-kops-instance-group"><span>Incident on 2020-09-28 13:10 - Termination of nodes updating kops Instance Group.</span></a>
          </li>
          <li>
            <a href="./incident-log.html#incident-on-2020-09-21-18-27-some-cloud-platform-components-destroyed"><span>Incident on 2020-09-21 18:27 - Some cloud-platform components destroyed.</span></a>
          </li>
          <li>
            <a href="./incident-log.html#incident-on-2020-09-07-12-54-all-users-are-unable-to-create-new-ingress-rules"><span>Incident on 2020-09-07 12:54 - All users are unable to create new ingress rules</span></a>
          </li>
          <li>
            <a href="./incident-log.html#incident-on-2020-08-25-11-26-connectivity-issues-with-eu-west-2a"><span>Incident on 2020-08-25 11:26 - Connectivity issues with eu-west-2a</span></a>
          </li>
          <li>
            <a href="./incident-log.html#incident-on-2020-08-14-11-01-ingress-controllers-crashlooping"><span>Incident on 2020-08-14 11:01 - Ingress-controllers crashlooping</span></a>
          </li>
          <li>
            <a href="./incident-log.html#incident-on-2020-08-07-16-39-master-node-provisioning-failure"><span>Incident on 2020-08-07 16:39 - Master node provisioning failure</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="./incident-log.html#q2-2020-april-june"><span>Q2 2020 (April - June)</span></a>
        <ul>
          <li>
            <a href="./incident-log.html#incident-on-2020-08-04-17-13"><span>Incident on 2020-08-04 17:13</span></a>
          </li>
          <li>
            <a href="./incident-log.html#incident-on-2020-04-15-10-58-nginx-tls"><span>Incident on 2020-04-15 10:58 Nginx/TLS</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="./incident-log.html#q1-2020-january-march"><span>Q1 2020 (January - March)</span></a>
        <ul>
          <li>
            <a href="./incident-log.html#incident-on-2020-02-25-10-58"><span>Incident on 2020-02-25 10:58</span></a>
          </li>
          <li>
            <a href="./incident-log.html#incident-on-2020-02-18-14-13-utc"><span>Incident on 2020-02-18 14:13 UTC</span></a>
          </li>
          <li>
            <a href="./incident-log.html#incident-on-2020-02-12-11-45-utc"><span>Incident on 2020-02-12 11:45 UTC</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="./incident-log.html#about-this-incident-log"><span>About this incident log</span></a>
      </li>
      <li>
        <a href="./incident-log.html#template"><span>Template</span></a>
        <ul>
          <li>
            <a href="./incident-log.html#incident-on-yyyy-mm-dd-hh-mm-brief-description"><span>Incident on YYYY-MM-DD HH:MM - [Brief description]</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="./incident-log.html#impact"><span>Impact:</span></a>
      </li>
      <li>
        <a href="./incident-log.html#context"><span>Context:</span></a>
      </li>
      <li>
        <a href="./incident-log.html#resolution"><span>Resolution:</span></a>
      </li>
      <li>
        <a href="./incident-log.html#review-actions"><span>Review actions:</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./changes-in-cloudplatform.html"><span>Change Process in Cloud Platform</span></a>
    <ul>
      <li>
        <a href="./changes-in-cloudplatform.html#making-changes-to-cloud-plarform-infrastructure"><span>Making Changes to cloud-plarform-infrastructure</span></a>
      </li>
      <li>
        <a href="./changes-in-cloudplatform.html#making-changes-to-terraform-modules"><span>Making Changes to Terraform modules</span></a>
      </li>
      <li>
        <a href="./changes-in-cloudplatform.html#making-changes-to-helm-charts"><span>Making Changes to Helm Charts</span></a>
      </li>
      <li>
        <a href="./changes-in-cloudplatform.html#making-changes-to-environments-service-teams"><span>Making changes to environments (Service Teams)</span></a>
      </li>
      <li>
        <a href="./changes-in-cloudplatform.html#communications"><span>Communications</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./add-concourse-to-cluster.html"><span>Add Concourse to a test cluster</span></a>
    <ul>
      <li>
        <a href="./add-concourse-to-cluster.html#pre-requisites"><span>Pre-requisites</span></a>
      </li>
      <li>
        <a href="./add-concourse-to-cluster.html#process"><span>Process</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./upgrade-eks-cluster.html"><span>Upgrade EKS cluster</span></a>
    <ul>
      <li>
        <a href="./upgrade-eks-cluster.html#run-the-upgrade-via-the-tools-image"><span>Run the upgrade, via the tools image</span></a>
      </li>
      <li>
        <a href="./upgrade-eks-cluster.html#upgrade-eks-cluster-pre-requisites"><span>Pre-requisites</span></a>
      </li>
      <li>
        <a href="./upgrade-eks-cluster.html#upgrade-steps"><span>Upgrade Steps</span></a>
        <ul>
          <li>
            <a href="./upgrade-eks-cluster.html#upgrade-eks-terraform-module"><span>Upgrade EKS Terraform Module</span></a>
          </li>
          <li>
            <a href="./upgrade-eks-cluster.html#upgrade-control-plane"><span>Upgrade Control Plane</span></a>
          </li>
          <li>
            <a href="./upgrade-eks-cluster.html#upgrade-node-group-s"><span>Upgrade Node Group(s)</span></a>
          </li>
          <li>
            <a href="./upgrade-eks-cluster.html#upgrade-addon-s"><span>Upgrade addon(s)</span></a>
          </li>
          <li>
            <a href="./upgrade-eks-cluster.html#troubleshooting"><span>Troubleshooting</span></a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <a href="./upgrade-terraform-version.html"><span>Upgrade Terraform Version</span></a>
    <ul>
      <li>
        <a href="./upgrade-terraform-version.html#introduction"><span>Introduction</span></a>
      </li>
      <li>
        <a href="./upgrade-terraform-version.html#recommendations"><span>Recommendations</span></a>
      </li>
      <li>
        <a href="./upgrade-terraform-version.html#caveats"><span>Caveats</span></a>
      </li>
      <li>
        <a href="./upgrade-terraform-version.html#how-to-perform-the-upgrade-divide-and-conquer"><span>How to perform the upgrade - divide and conquer</span></a>
        <ul>
          <li>
            <a href="./upgrade-terraform-version.html#before-the-upgrade"><span>Before the upgrade</span></a>
          </li>
          <li>
            <a href="./upgrade-terraform-version.html#environments-state-files"><span>Environments state files</span></a>
          </li>
          <li>
            <a href="./upgrade-terraform-version.html#infrastructure-state-files"><span>Infrastructure state files</span></a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <a href="./upgrade-cluster-components.html"><span>Upgrade cluster components</span></a>
    <ul>
      <li>
        <a href="./upgrade-cluster-components.html#planning"><span>Planning</span></a>
      </li>
      <li>
        <a href="./upgrade-cluster-components.html#testing-the-upgrade-in-a-test-cluster"><span>Testing the upgrade in a test cluster</span></a>
        <ul>
          <li>
            <a href="./upgrade-cluster-components.html#setup-environment"><span>Setup environment</span></a>
          </li>
          <li>
            <a href="./upgrade-cluster-components.html#run-a-shell-in-the-tools-image"><span>Run a shell in the tools image</span></a>
          </li>
          <li>
            <a href="./upgrade-cluster-components.html#authenticate-to-the-test-cluster"><span>Authenticate to the test cluster</span></a>
          </li>
          <li>
            <a href="./upgrade-cluster-components.html#run-the-integration-tests"><span>Run the integration tests</span></a>
          </li>
          <li>
            <a href="./upgrade-cluster-components.html#testing-the-upgrade"><span>Testing the upgrade</span></a>
          </li>
          <li>
            <a href="./upgrade-cluster-components.html#things-to-observe-when-testing-the-upgrade"><span>Things to observe when testing the upgrade</span></a>
          </li>
          <li>
            <a href="./upgrade-cluster-components.html#performing-the-upgrade"><span>Performing the upgrade</span></a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <a href="./upgrade-user-components.html"><span>Upgrade user components</span></a>
    <ul>
      <li>
        <a href="./upgrade-user-components.html#making-changes-to-your-module"><span>Making changes to your module</span></a>
      </li>
      <li>
        <a href="./upgrade-user-components.html#semantic-versioning-and-release"><span>Semantic Versioning and release</span></a>
      </li>
      <li>
        <a href="./upgrade-user-components.html#upgrading-a-user-component-in-environments"><span>Upgrading a user component in environments</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./delete-cluster.html"><span>Delete a cluster</span></a>
    <ul>
      <li>
        <a href="./delete-cluster.html#delete-the-cluster-using-the-script"><span>Delete the cluster using the script</span></a>
        <ul>
          <li>
            <a href="./delete-cluster.html#first-run-make-tools-shell"><span>First, run make tools-shell</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="./delete-cluster.html#delete-the-cluster-using-concourse-fly-commands"><span>Delete the cluster using concourse fly commands</span></a>
      </li>
      <li>
        <a href="./delete-cluster.html#delete-an-eks-cluster-manually"><span>Delete an EKS cluster manually</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./add-nodes-to-the-eks-cluster.html"><span>Add nodes/change the instance type of the AWS EKS cluster</span></a>
    <ul>
      <li>
        <a href="./add-nodes-to-the-eks-cluster.html#add-nodes-to-the-eks-cluster"><span>Add nodes to the eks cluster</span></a>
        <ul>
          <li>
            <a href="./add-nodes-to-the-eks-cluster.html#requirements"><span>Requirements</span></a>
          </li>
          <li>
            <a href="./add-nodes-to-the-eks-cluster.html#cluster-configuration"><span>Cluster configuration:</span></a>
          </li>
          <li>
            <a href="./add-nodes-to-the-eks-cluster.html#issue"><span>Issue</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="./add-nodes-to-the-eks-cluster.html#change-the-aws-eks-instance-type-worker-node-machine-type"><span>Change the AWS EKS instance type (worker_node_machine_type)</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./auth0-rotation.html"><span>Credentials rotation for auth0 apps</span></a>
    <ul>
      <li>
        <a href="./auth0-rotation.html#preparation"><span>Preparation</span></a>
      </li>
      <li>
        <a href="./auth0-rotation.html#1-taint-resources-terraform"><span>1) Taint resources (terraform)</span></a>
      </li>
      <li>
        <a href="./auth0-rotation.html#2-apply-changes-within-components-terraform"><span>2) Apply changes within components (terraform)</span></a>
      </li>
      <li>
        <a href="./auth0-rotation.html#3-verifiying-changes"><span>3) Verifiying changes</span></a>
      </li>
      <li>
        <a href="./auth0-rotation.html#4-update-manager-cluster-within-components-terraform"><span>4) Update Manager cluster within components (terraform)</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./rotate-git-crypt-key.html"><span>Git-crypt</span></a>
    <ul>
      <li>
        <a href="./rotate-git-crypt-key.html#adding-new-user-to-the-keyring"><span>Adding new user to the keyring</span></a>
      </li>
      <li>
        <a href="./rotate-git-crypt-key.html#rotating-the-git-crypt-key"><span>Rotating the git-crypt key</span></a>
        <ul>
          <li>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <a href="./custom-domain.html"><span>Add a custom domain</span></a>
  </li>
  <li>
    <a href="./add-new-receiver-alert-manager.html"><span>Add a new Alertmanager receiver and a slack webhook</span></a>
    <ul>
      <li>
        <a href="./add-new-receiver-alert-manager.html#add-a-new-alertmanager-receiver-and-a-slack-webhook-pre-requisites"><span>Pre-requisites</span></a>
      </li>
      <li>
        <a href="./add-new-receiver-alert-manager.html#creating-a-new-receiver-set"><span>Creating a new receiver set</span></a>
      </li>
      <li>
        <a href="./add-new-receiver-alert-manager.html#information-alerts"><span>Information Alerts</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./disaster-recovery-scenarios.html"><span>Cloud Platform Disaster Recovery Scenarios</span></a>
    <ul>
      <li>
        <a href="./disaster-recovery-scenarios.html#losing-a-namespace"><span>Losing a Namespace</span></a>
        <ul>
          <li>
            <a href="./disaster-recovery-scenarios.html#losing-a-namespace-impact"><span>Impact</span></a>
          </li>
          <li>
            <a href="./disaster-recovery-scenarios.html#possible-cause"><span>Possible Cause</span></a>
          </li>
          <li>
            <a href="./disaster-recovery-scenarios.html#restore-process"><span>Restore process</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="./disaster-recovery-scenarios.html#losing-a-kubernetes-component-or-object"><span>Losing a Kubernetes Component or Object</span></a>
        <ul>
          <li>
            <a href="./disaster-recovery-scenarios.html#losing-a-kubernetes-component-or-object-impact"><span>Impact</span></a>
          </li>
          <li>
            <a href="./disaster-recovery-scenarios.html#losing-a-kubernetes-component-or-object-possible-cause"><span>Possible Cause</span></a>
          </li>
          <li>
            <a href="./disaster-recovery-scenarios.html#losing-a-kubernetes-component-or-object-restore-process"><span>Restore process</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="./disaster-recovery-scenarios.html#losing-the-whole-cluster"><span>Losing the whole cluster</span></a>
        <ul>
          <li>
            <a href="./disaster-recovery-scenarios.html#losing-the-whole-cluster-impact"><span>Impact</span></a>
          </li>
          <li>
            <a href="./disaster-recovery-scenarios.html#losing-the-whole-cluster-possible-cause"><span>Possible Cause</span></a>
          </li>
          <li>
            <a href="./disaster-recovery-scenarios.html#how-this-plan-is-tested"><span>How this plan is tested:</span></a>
          </li>
          <li>
            <a href="./disaster-recovery-scenarios.html#assumptions"><span>Assumptions</span></a>
          </li>
          <li>
            <a href="./disaster-recovery-scenarios.html#losing-the-whole-cluster-restore-process"><span>Restore process</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="./disaster-recovery-scenarios.html#deleted-terraform-state"><span>Deleted terraform state</span></a>
        <ul>
          <li>
            <a href="./disaster-recovery-scenarios.html#deleted-terraform-state-impact"><span>Impact</span></a>
          </li>
          <li>
            <a href="./disaster-recovery-scenarios.html#deleted-terraform-state-possible-cause"><span>Possible Cause</span></a>
          </li>
          <li>
            <a href="./disaster-recovery-scenarios.html#deleted-terraform-state-restore-process"><span>Restore process</span></a>
          </li>
          <li>
            <a href="./disaster-recovery-scenarios.html#recovering-more-complex-scenarios"><span>Recovering more complex scenarios</span></a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <a href="./bastion-node.html"><span>Create and access bastion node.</span></a>
    <ul>
      <li>
        <a href="./bastion-node.html#create-bastion-node"><span>Create bastion node</span></a>
      </li>
      <li>
        <a href="./bastion-node.html#access-bastion-node"><span>Access bastion node</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./calico.html"><span>Calico checklist before an upgrade</span></a>
    <ul>
      <li>
        <a href="./calico.html#current-status"><span>Current status</span></a>
      </li>
      <li>
        <a href="./calico.html#options-available"><span>Options available</span></a>
      </li>
      <li>
        <a href="./calico.html#making-sure-it-works"><span>Making sure it works</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./rotate-user-aws-credentials.html"><span>Rotate User AWS Credentials</span></a>
    <ul>
      <li>
        <ul>
          <li>
          </li>
        </ul>
      </li>
      <li>
        <a href="./rotate-user-aws-credentials.html#set-pingdom-environment-variables-optional"><span>Set pingdom environment variables(Optional)</span></a>
      </li>
      <li>
        <a href="./rotate-user-aws-credentials.html#target-the-live-cluster"><span>Target the live cluster</span></a>
      </li>
      <li>
        <a href="./rotate-user-aws-credentials.html#set-cluster-related-environment-variables"><span>Set cluster related environment variables</span></a>
      </li>
      <li>
        <a href="./rotate-user-aws-credentials.html#set-the-namespace-name"><span>Set the namespace name</span></a>
      </li>
      <li>
        <a href="./rotate-user-aws-credentials.html#terraform-init"><span>Terraform Init</span></a>
      </li>
      <li>
        <a href="./rotate-user-aws-credentials.html#terraform-plan-apply"><span>Terraform Plan/Apply</span></a>
        <ul>
          <li>
            <a href="./rotate-user-aws-credentials.html#2-identify-the-compromised-terraform-object"><span>2. Identify the compromised terraform object</span></a>
          </li>
          <li>
            <a href="./rotate-user-aws-credentials.html#3-destroy-the-compromised-key"><span>3. Destroy the compromised key</span></a>
          </li>
          <li>
            <a href="./rotate-user-aws-credentials.html#4-let-terraform-create-a-new-key"><span>4. Let terraform create a new key</span></a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <a href="./rotate-user-aws-credentials.html"><span>Rotate RDS Credentials</span></a>
    <ul>
      <li>
        <ul>
          <li>
            <a href="./rotate-user-aws-credentials.html#let-terraform-create-a-new-password"><span>Let terraform create a new password</span></a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <a href="./aws-leaked-credentials.html"><span>AWS Compromised Credentials</span></a>
    <ul>
      <li>
        <a href="./aws-leaked-credentials.html#steps-for-a-leaked-credentials"><span>Steps for a leaked credentials</span></a>
      </li>
      <li>
        <a href="./aws-leaked-credentials.html#getting-new-credentials"><span>Getting new credentials</span></a>
      </li>
      <li>
        <a href="./aws-leaked-credentials.html#audit-the-compromised-credentials"><span>Audit the compromised credentials</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./aws-create-user.html"><span>AWS Console Access</span></a>
    <ul>
      <li>
        <a href="./aws-create-user.html#steps-to-create-delete-users"><span>Steps to create/delete users</span></a>
      </li>
      <li>
        <a href="./aws-create-user.html#activating-mfa-for-new-users"><span>Activating MFA for new users</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./public-s3-bucket.html"><span>Make an S3 bucket public</span></a>
  </li>
  <li>
    <a href="./delete-prometheus-metrics.html"><span>Delete Prometheus Metrics</span></a>
    <ul>
      <li>
        <a href="./delete-prometheus-metrics.html#1-identify-the-metrics-you-want-to-delete"><span>1.  Identify the metrics you want to delete</span></a>
      </li>
      <li>
        <a href="./delete-prometheus-metrics.html#2-enable-the-admin-interface-in-prometheus"><span>2. Enable the admin interface in Prometheus</span></a>
      </li>
      <li>
        <a href="./delete-prometheus-metrics.html#3-launch-a-port-forward-pod"><span>3. Launch a port-forward pod</span></a>
      </li>
      <li>
        <a href="./delete-prometheus-metrics.html#4-forward-local-traffic-to-prometheus"><span>4. Forward local traffic to Prometheus</span></a>
      </li>
      <li>
        <a href="./delete-prometheus-metrics.html#5-use-curl-in-another-terminal-to-hit-the-api-endpoint"><span>5. Use curl (in another terminal) to hit the API endpoint</span></a>
      </li>
      <li>
        <a href="./delete-prometheus-metrics.html#6-use-this-script-to-delete-multiple-metrics"><span>6. Use this script to delete multiple metrics</span></a>
      </li>
      <li>
        <a href="./delete-prometheus-metrics.html#7-clean-up"><span>7. Clean up</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./manually-apply-namespace.html"><span>Manually Plan/Apply Namespace Resources in live cluster</span></a>
    <ul>
      <li>
        <a href="./manually-apply-namespace.html#start-in-the-appropriate-branch-of-the-environments-repo"><span>Start in the appropriate branch of the environments repo</span></a>
      </li>
      <li>
        <a href="./manually-apply-namespace.html#manually-plan-apply-namespace-resources-in-live-cluster-set-pingdom-environment-variables-optional"><span>Set pingdom environment variables(Optional)</span></a>
      </li>
      <li>
        <a href="./manually-apply-namespace.html#manually-plan-apply-namespace-resources-in-live-cluster-target-the-live-cluster"><span>Target the live cluster</span></a>
      </li>
      <li>
        <a href="./manually-apply-namespace.html#set-some-environment-variables"><span>Set some environment variables</span></a>
      </li>
      <li>
        <a href="./manually-apply-namespace.html#manually-plan-apply-namespace-resources-in-live-cluster-set-the-namespace-name"><span>Set the namespace name</span></a>
      </li>
      <li>
        <a href="./manually-apply-namespace.html#manually-plan-apply-namespace-resources-in-live-cluster-terraform-init"><span>Terraform Init</span></a>
      </li>
      <li>
        <a href="./manually-apply-namespace.html#manually-plan-apply-namespace-resources-in-live-cluster-terraform-plan-apply"><span>Terraform Plan/Apply</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./manually-delete-namespace-resources.html"><span>Manually Delete Namespace Resources</span></a>
  </li>
  <li>
    <a href="./remove-data-from-elasticsearch.html"><span>Remove data from Elasticsearch</span></a>
    <ul>
      <li>
        <a href="./remove-data-from-elasticsearch.html#stop-the-breach-first"><span>Stop the breach first</span></a>
      </li>
      <li>
        <a href="./remove-data-from-elasticsearch.html#things-to-know"><span>Things to know</span></a>
      </li>
      <li>
        <a href="./remove-data-from-elasticsearch.html#get-yourself-access"><span>Get yourself access</span></a>
      </li>
      <li>
        <a href="./remove-data-from-elasticsearch.html#build-your-query"><span>Build your query</span></a>
      </li>
      <li>
        <a href="./remove-data-from-elasticsearch.html#delete-by-query"><span>Delete by query</span></a>
      </li>
      <li>
        <a href="./remove-data-from-elasticsearch.html#removing-specific-logs-filtered-by-phrase"><span>Removing specific logs filtered by phrase</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./export-elasticsearch-to-csv.html"><span>Export data from Elasticsearch into a CSV file</span></a>
    <ul>
      <li>
        <a href="./export-elasticsearch-to-csv.html#workaround"><span>Workaround</span></a>
        <ul>
          <li>
            <a href="./export-elasticsearch-to-csv.html#install-es2csv"><span>Install es2csv</span></a>
          </li>
          <li>
            <a href="./export-elasticsearch-to-csv.html#usage"><span>Usage</span></a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <a href="./manage-grafana-snapshots.html"><span>Manage Published Grafana Dashboard Snapshots</span></a>
    <ul>
      <li>
        <a href="./manage-grafana-snapshots.html#steps-to-remove-snapshot"><span>Steps to remove Snapshot</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./delete-state-lock.html"><span>Delete terraform state lock</span></a>
    <ul>
      <li>
        <a href="./delete-state-lock.html#command-line-method"><span>Command-line method</span></a>
      </li>
      <li>
        <a href="./delete-state-lock.html#aws-console-method"><span>AWS Console method</span></a>
      </li>
      <li>
        <a href="./delete-state-lock.html#terraform-command"><span>Terraform command</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./error-refreshing-state.html"><span>Terraform state lock - Error refreshing state</span></a>
  </li>
  <li>
    <a href="./divergence-error.html"><span>How to Investigate Divergence Errors</span></a>
    <ul>
      <li>
        <a href="./divergence-error.html#reproduce-the-plan"><span>Reproduce the plan</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./external-dns-error.html"><span>How to Investigate External-Dns Errors</span></a>
    <ul>
      <li>
        <ul>
          <li>
            <a href="./external-dns-error.html#how-to-investigate-external-dns-errors-troubleshooting"><span>Troubleshooting</span></a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <a href="./recycle-node.html"><span>Recycle-node</span></a>
  </li>
  <li>
    <a href="./revoke-user-auth0-kubeconfig-access-token.html"><span>Revoke auth0 kubeconfig access token</span></a>
    <ul>
      <li>
        <a href="./revoke-user-auth0-kubeconfig-access-token.html#1-revoke-existing-tokens-generated-from-github"><span>1. Revoke existing tokens generated from github</span></a>
      </li>
      <li>
        <a href="./revoke-user-auth0-kubeconfig-access-token.html#2-recreate-auth0-client-kubernetes"><span>2. Recreate ​​auth0_client.kubernetes</span></a>
        <ul>
          <li>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <a href="./eks-cluster.html"><span>Provisioning EKS clusters</span></a>
    <ul>
      <li>
        <a href="./eks-cluster.html#provisioning-eks-clusters-pre-requisites"><span>Pre-requisites</span></a>
      </li>
      <li>
        <a href="./eks-cluster.html#environment-variables"><span>Environment Variables</span></a>
      </li>
      <li>
        <a href="./eks-cluster.html#provisioning"><span>Provisioning</span></a>
        <ul>
          <li>
            <a href="./eks-cluster.html#1-vpc"><span>1. VPC</span></a>
          </li>
          <li>
            <a href="./eks-cluster.html#2-creating-eks-cluster"><span>2. Creating EKS cluster</span></a>
          </li>
          <li>
            <a href="./eks-cluster.html#3-deploy-components"><span>3. Deploy components</span></a>
          </li>
          <li>
            <a href="./eks-cluster.html#4-delete-the-eks-cluster"><span>4. Delete the EKS cluster</span></a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <a href="./change-alias-in-route53.html"><span>Change load balancer alias to the interface IP’s in Route53.</span></a>
    <ul>
      <li>
        <a href="./change-alias-in-route53.html#request-aws-to-restart-the-health-check"><span>Request AWS to restart the health check</span></a>
      </li>
      <li>
        <a href="./change-alias-in-route53.html#change-load-balancer-alias"><span>Change load balancer alias</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./expand.html"><span>Expanding Persistent Volumes created using StatefulSets</span></a>
  </li>
  <li>
    <a href="./velero.html"><span>Velero - Cluster backups and disaster recovery</span></a>
    <ul>
      <li>
        <ul>
          <li>
          </li>
        </ul>
      </li>
      <li>
        <a href="./velero.html#backups"><span>Backups</span></a>
        <ul>
          <li>
            <a href="./velero.html#why"><span>Why?</span></a>
          </li>
          <li>
            <a href="./velero.html#what"><span>What?</span></a>
          </li>
          <li>
            <a href="./velero.html#how"><span>How?</span></a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <a href="./helm-repository.html"><span>Cloud Platform helm chart repository</span></a>
    <ul>
      <li>
        <a href="./helm-repository.html#performing-crud-on-cloud-platform-helm-repository"><span>Performing CRUD on Cloud Platform Helm repository</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./access-eks-cluster.html"><span>Access EKS cluster</span></a>
    <ul>
      <li>
        <a href="./access-eks-cluster.html#access-eks-cluster-pre-requisites"><span>Pre-requisites</span></a>
        <ul>
          <li>
            <a href="./access-eks-cluster.html#create-kubeconfig-using-aws-command"><span>Create kubeconfig using aws command</span></a>
          </li>
          <li>
            <a href="./access-eks-cluster.html#create-kubeconfig-manually-using-a-template"><span>Create kubeconfig manually using a template</span></a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <a href="./get-audit-log-from-modsec.html"><span>Get an audit log from modsec</span></a>
    <ul>
      <li>
        <a href="./get-audit-log-from-modsec.html#how-do-i-check-the-audit-log"><span>How do I check the audit log</span></a>
      </li>
      <li>
        <a href="./get-audit-log-from-modsec.html#perform-a-search-for-the-unique-id-obtained-from-the-kibana-entry"><span>Perform a search for the unique-id (obtained from the Kibana entry)</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./eks-node-terminal-access.html"><span>Terminal access to EKS managed nodes</span></a>
    <ul>
      <li>
        <a href="./eks-node-terminal-access.html#overview"><span>Overview</span></a>
      </li>
      <li>
        <a href="./eks-node-terminal-access.html#terminal-access-to-eks-managed-nodes-pre-requisites"><span>Pre-requisites</span></a>
      </li>
      <li>
        <a href="./eks-node-terminal-access.html#steps-to-get-terminal-access-via-console"><span>Steps to get terminal access via Console</span></a>
      </li>
      <li>
        <a href="./eks-node-terminal-access.html#steps-to-get-terminal-access-via-aws-cli"><span>Steps to get terminal access via AWS cli</span></a>
      </li>
      <li>
        <a href="./eks-node-terminal-access.html#access-via-ssh-scp"><span>Access via SSH /SCP</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./joiners-guide.html"><span>Onboarding into the Cloud Platform Team</span></a>
    <ul>
      <li>
        <a href="./joiners-guide.html#people-team"><span>People Team</span></a>
      </li>
      <li>
        <a href="./joiners-guide.html#service-desk"><span>Service Desk</span></a>
      </li>
      <li>
        <a href="./joiners-guide.html#sit-down-with-dm"><span>Sit down with DM</span></a>
      </li>
      <li>
        <a href="./joiners-guide.html#cloud-platform-team"><span>Cloud Platform team</span></a>
      </li>
      <li>
        <a href="./joiners-guide.html#access"><span>Access</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./cloud-platform-to-tgw.html"><span>Adding a route to connect to a TGW</span></a>
    <ul>
      <li>
        <a href="./cloud-platform-to-tgw.html#quick-introduction"><span>Quick introduction</span></a>
      </li>
      <li>
        <a href="./cloud-platform-to-tgw.html#transit-gateway"><span>Transit Gateway</span></a>
      </li>
      <li>
        <a href="./cloud-platform-to-tgw.html#making-the-change"><span>Making the change</span></a>
      </li>
      <li>
        <a href="./cloud-platform-to-tgw.html#adding-live-2-vpc-to-pttp-tgw"><span>Adding live-2 VPC to PTTP TGW</span></a>
      </li>
      <li>
        <a href="./cloud-platform-to-tgw.html#moving-away-from-cloud-platform-transit-gateway-account"><span>Moving away from  Cloud Platform Transit Gateway account</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./custom-default-backend.html"><span>Custom default-backend</span></a>
    <ul>
      <li>
        <ul>
          <li>
            <a href="./custom-default-backend.html#background"><span>Background</span></a>
          </li>
          <li>
            <a href="./custom-default-backend.html#use-platform-level-error-page"><span>Use platform-level error page</span></a>
          </li>
          <li>
            <a href="./custom-default-backend.html#not-use-platform-level-error-page"><span>Not use platform-level error page</span></a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <a href="./add-new-opa-policy.html"><span>Open Policy Agent policies</span></a>
    <ul>
      <li>
        <a href="./add-new-opa-policy.html#adding-a-policy"><span>Adding a policy</span></a>
      </li>
      <li>
        <a href="./add-new-opa-policy.html#writing-tests"><span>Writing tests</span></a>
      </li>
      <li>
        <a href="./add-new-opa-policy.html#references"><span>References</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./destroy-concourse-build-data.html"><span>Destroy Concourse Build Data</span></a>
    <ul>
      <li>
        <a href="./destroy-concourse-build-data.html#destroy-concourse-build-data-overview"><span>Overview</span></a>
      </li>
      <li>
        <a href="./destroy-concourse-build-data.html#steps-to-remove-the-build-data"><span>Steps to remove the build data</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./leavers-guide.html"><span>Leavers Guide</span></a>
    <ul>
      <li>
        <a href="./leavers-guide.html#revoking-access"><span>Revoking Access</span></a>
        <ul>
          <li>
            <a href="./leavers-guide.html#digital-services"><span>Digital Services</span></a>
          </li>
          <li>
            <a href="./leavers-guide.html#aws-accounts"><span>AWS Accounts</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="./leavers-guide.html#line-manager-actions"><span>Line manager actions</span></a>
        <ul>
          <li>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <a href="./scheduled-pr-reminders.html"><span>Scheduled PR Reminders</span></a>
    <ul>
      <li>
        <ul>
          <li>
            <a href="./scheduled-pr-reminders.html#steps-required-for-new-repositories"><span>Steps required for new repositories</span></a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <a href="./grafana-dashboards.html"><span>Grafana Dashboards</span></a>
    <ul>
      <li>
        <a href="./grafana-dashboards.html#kubernetes-number-of-pods-per-node"><span>Kubernetes Number of Pods per Node</span></a>
        <ul>
          <li>
            <a href="./grafana-dashboards.html#dashboard-layout"><span>Dashboard Layout</span></a>
          </li>
          <li>
            <a href="./grafana-dashboards.html#kubernetes-number-of-pods-per-node-troubleshooting"><span>Troubleshooting</span></a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <a href="./on-call.html"><span>Going on call</span></a>
    <ul>
      <li>
        <a href="./on-call.html#what-s-expected"><span>What’s expected?</span></a>
        <ul>
          <li>
            <a href="./on-call.html#expected"><span>Expected:</span></a>
          </li>
          <li>
            <a href="./on-call.html#not-expected"><span>Not expected:</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="./on-call.html#where-do-i-start"><span>Where do I start?</span></a>
      </li>
      <li>
        <a href="./on-call.html#what-do-i-get-for-being-on-call"><span>What do I get for being on call?</span></a>
      </li>
      <li>
        <a href="./on-call.html#civil-servants"><span>Civil servants</span></a>
      </li>
      <li>
        <a href="./on-call.html#contractors"><span>Contractors</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./cloud-platform-communications-plan.html"><span>Cloud Platform Communications Plan</span></a>
    <ul>
      <li>
        <a href="./cloud-platform-communications-plan.html#the-plan"><span>The Plan</span></a>
      </li>
      <li>
        <a href="./cloud-platform-communications-plan.html#tips-on-format-of-communications"><span>Tips on format of communications</span></a>
        <ul>
          <li>
            <a href="./cloud-platform-communications-plan.html#tips-on-format-of-communications-examples"><span>Examples</span></a>
          </li>
          <li>
            <a href="./cloud-platform-communications-plan.html#things-to-include-in-incident-communications"><span>Things to include in incident communications</span></a>
          </li>
          <li>
            <a href="./cloud-platform-communications-plan.html#example"><span>Example</span></a>
          </li>
          <li>
            <a href="./cloud-platform-communications-plan.html#things-to-include-in-upgrade-communications"><span>Things to include in upgrade communications</span></a>
          </li>
          <li>
            <a href="./cloud-platform-communications-plan.html#tips-on-format-of-communications-example"><span>Example</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="./cloud-platform-communications-plan.html#sharing-information-with-the-wider-ministry-of-justice-and-the-public"><span>Sharing information with the wider Ministry of Justice and the Public</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./google-search-indexing.html"><span>Google Search Console and Indexing</span></a>
  </li>
  <li>
    <a href="./tips-and-tricks.html"><span>Tips and Tricks</span></a>
    <ul>
      <li>
        <a href="./tips-and-tricks.html#delete-an-rds-database-snapshot"><span>Delete an RDS database snapshot</span></a>
      </li>
      <li>
        <a href="./tips-and-tricks.html#check-the-expiration-date-of-the-ssl-certificate-for-a-live-domain"><span>Check the expiration date of the SSL certificate for a live domain</span></a>
      </li>
      <li>
        <a href="./tips-and-tricks.html#delete-a-quot-stuck-quot-resource"><span>Delete a “stuck” resource</span></a>
      </li>
      <li>
        <a href="./tips-and-tricks.html#filter-namespaces-by-specific-label-or-annotation"><span>Filter namespaces by specific label or annotation</span></a>
      </li>
      <li>
        <a href="./tips-and-tricks.html#find-all-pods-running-on-a-specific-worker-node"><span>Find all pods running on a specific worker node</span></a>
      </li>
      <li>
        <a href="./tips-and-tricks.html#count-pods-running-on-all-nodes"><span>Count pods running on all nodes</span></a>
      </li>
      <li>
        <a href="./tips-and-tricks.html#output-all-records-from-route53-as-a-csv-file"><span>Output all records from Route53 as a CSV file</span></a>
      </li>
      <li>
        <a href="./tips-and-tricks.html#add-more-rss-feeds-to-cloud-platform-rss-channel"><span>Add more RSS feeds to #cloud-platform-rss channel</span></a>
      </li>
      <li>
        <a href="./tips-and-tricks.html#find-files-which-don-39-t-contain-a-particular-string"><span>Find files which don’t contain a particular string</span></a>
      </li>
      <li>
        <a href="./tips-and-tricks.html#get-aws-ec2-instance-information-for-a-node"><span>Get AWS EC2 instance information for a node</span></a>
      </li>
      <li>
        <a href="./tips-and-tricks.html#create-a-one-off-job-to-repeat-a-cronjob"><span>Create a one-off job to repeat a cronjob</span></a>
      </li>
      <li>
        <a href="./tips-and-tricks.html#hijack-a-concourse-job-container"><span>Hijack a concourse job container</span></a>
      </li>
      <li>
        <a href="./tips-and-tricks.html#help-when-manually-deleting-aws-resources"><span>Help when manually deleting AWS resources</span></a>
      </li>
      <li>
        <a href="./tips-and-tricks.html#find-out-why-your-namespace-isn-39-t-deleting"><span>Find out why your namespace isn’t deleting</span></a>
      </li>
      <li>
        <a href="./tips-and-tricks.html#modsec-false-positives"><span>Modsec false positives</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="./add-a-new-runbook.html"><span>Add a new runbook</span></a>
    <ul>
      <li>
        <ul>
          <li>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>


              </nav>
            </div>
          </div>

        <div class="app-pane__content toc-open-disabled">
          <main id="content" class="technical-documentation" data-module="anchored-headings">
            <h1 id="change-process-in-cloud-platform">Change Process in Cloud Platform</h1>
<p>The Cloud Platform team implements and encourage an Infrastructure as Code (IaC) methodology to manage the platform. It means every single change is done through code (if you spot something different raise it with us please).</p>
<p><a href="https://github.com/ministryofjustice/cloud-platform-infrastructure">cloud-platform-infrastructure repository</a> is our main repository where infrastructure gets created and all components fit together. From this repository everything gets linked.</p>
<p>Mostly all components are Terraform <a href="https://developer.hashicorp.com/terraform/language/modules">modules</a>, and they are managed in their own git repository; you can list all modules <a href="https://github.com/ministryofjustice?q=cloud-platform-terraform&amp;type=&amp;language=">here</a>.</p>
<h2 id="making-changes-to-cloud-plarform-infrastructure">Making Changes to cloud-plarform-infrastructure</h2>

<ol>
<li>Create a PR which includes the change you want to make. Make sure the <a href="https://concourse.cloud-platform.service.justice.gov.uk/teams/main/pipelines/infrastructure-live/jobs/terraform-plan-live/">plan pipeline</a> is happy with the change.</li>
<li>Chase the team to get your PR approved, and if it involves downtime ensure you have communications in place.</li>
<li>Merge and wait until the <a href="https://concourse.cloud-platform.service.justice.gov.uk/teams/main/pipelines/infrastructure-live/jobs/terraform-apply/">apply pipeline</a> applies your change.</li>
</ol>
<h2 id="making-changes-to-terraform-modules">Making Changes to Terraform modules</h2>
<p>Updating a module is very simple and consist in the following steps:</p>

<ol>
<li>Create a PR and ask a team member for approval.</li>
<li>Merge PR</li>
<li>Create a release following <a href="https://semver.org/">semantic version spec.</a></li>
<li>In order to keep our definitions/instances <a href="https://github.com/ministryofjustice/cloud-platform/blob/main/architecture-decision-record/015-Keeping-Terraform-modules-up-to-date.md">up to date</a>, update all existing instances in <a href="https://github.com/ministryofjustice/cloud-platform-environments">environments repo</a> and <a href="https://github.com/ministryofjustice/cloud-platform-infrastructure">cloud-platform-infrastructure repo</a>. If this step affects team&rsquo;s environments it will need planning and communication.</li>
</ol>
<p>Steps 2 and 3 can be done at any time and they don&rsquo;t affect the running infrastructure, since all Terraform modules calls have a pinned release version. No Terraform module should point to master branches or latest releases automatically.</p>
<p>Finally, create the PR which updates the definition where your module is called and get ready to apply it following the guidelines above.</p>
<h2 id="making-changes-to-helm-charts">Making Changes to Helm Charts</h2>
<p>Cloud Platform&rsquo;s Helm Charts are hosted in <a href="https://github.com/ministryofjustice/cloud-platform-helm-charts">cloud-platform-helm-charts</a> repository using <a href="https://helm.sh/docs/topics/chart_repository/#github-pages-example">Github Pages</a>. Changes in Helm Charts should include:</p>

<ul>
<li>Bump chart version everytime you make a change</li>
<li>Regenerate the <code>index.yml</code> following <a href="https://github.com/ministryofjustice/cloud-platform-helm-charts/tree/gh-pages#regenerating-the-indexyaml">this</a> instructions</li>
<li>PR against gh-pages branch</li>
</ul>
<h2 id="making-changes-to-environments-service-teams">Making changes to environments (Service Teams)</h2>
<p>The Cloud Platform source of truth for team&rsquo;s environments (Kubernetes namespaces) is <a href="https://github.com/ministryofjustice/cloud-platform-environments">cloud-platform-environments</a>. Changes under this repository follow a similar process:</p>

<ol>
<li>Create a PR and verify the planned changes in the <a href="https://concourse.cloud-platform.service.justice.gov.uk/teams/main/pipelines/environments-live">plan pipeline</a>. If you are happy with them, ask a team member for approval.</li>
<li>Merge PR</li>
</ol>
<p>Within the environments repository, we have an end to end process fully automated with pipelines. Once the change is merged, it is going to be automatically applied by the apply pipeline (<a href="https://concourse.cloud-platform.service.justice.gov.uk/teams/main/pipelines/environments-live/jobs/apply-live">apply-live</a> and <a href="https://concourse.cloud-platform.service.justice.gov.uk/teams/main/pipelines/environments-live/jobs/apply-namespace-changes-live/builds/1">apply-namespace-changes-live</a> and if the change is destroying a namespace it will be detected by <a href="https://concourse.cloud-platform.service.justice.gov.uk/teams/main/pipelines/environments-live/jobs/detect-deleted-namespaces/builds/1">detect-deleted-namespace</a> pipeline.</p>
<h2 id="communications">Communications</h2>
<p>If any changes involve downtime we must inform teams about it via Slack (#cloud-platform-update). It is important to include <strong>which services</strong> are going to be down and <strong>for how long</strong>.</p>
<p>Sometimes teams misinterpret downtimes of Cloud Platform services to involve downtime of <strong>their services</strong>, so it is very important to be precise about the change and it&rsquo;s potential impact.</p>

              <div data-module='page-expiry' data-last-reviewed-on="2023-05-01">
    <div class='page-expiry--not-expired'>
      This page was last reviewed on 1 February 2023.

        It needs to be reviewed again on 1 May 2023
        by the page owner <a href="https://mojdt.slack.com/messages/cloud-platform">#cloud-platform</a>
        .
    </div>

    <div class='page-expiry--expired'>
      This page was set to be reviewed before 1 May 2023
       by the page owner <a href="https://mojdt.slack.com/messages/cloud-platform">#cloud-platform</a>.
      This might mean the content is out of date.
    </div>
  </div>

          </main>

          <aside>
              <ul class="contribution-banner">
                <li><a href="https://github.com/ministryofjustice/cloud-platform/blob/main/runbooks/source/changes-in-cloudplatform.html.md.erb">View source</a></li>
                <li><a href="https://github.com/ministryofjustice/cloud-platform/issues/new?body=Problem+with+%27Change+Process+in+Cloud+Platform%27+%28https%3A%2F%2Frunbooks.cloud-platform.service.justice.gov.uk%2Fchanges-in-cloudplatform.html%29&amp;labels=bug&amp;title=Re%3A+%27Change+Process+in+Cloud+Platform%27">Report problem</a></li>
                <li><a href="https://github.com/ministryofjustice/cloud-platform">GitHub Repo</a></li>
              </ul>
          </aside>

          <footer class="govuk-footer app-footer" role="contentinfo">
  <div class="govuk-footer__meta">
    <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">


      <svg
        aria-hidden="true"
        focusable="false"
        class="govuk-footer__licence-logo"
        xmlns="http://www.w3.org/2000/svg"
        viewbox="0 0 483.2 195.7"
        height="17"
        width="41"
      >
        <path
          fill="currentColor"
          d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
      </svg>
      <span class="govuk-footer__licence-description">
        All content is available under the
        <a
          class="govuk-footer__link"
          href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
          rel="license"
        >Open Government Licence v3.0</a>, except where otherwise stated
      </span>
    </div>
    <div class="govuk-footer__meta-item">
      <a
        class="govuk-footer__link govuk-footer__copyright-logo"
        href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >© Crown copyright</a>
    </div>
  </div>
</footer>

        </div>
      </div>
    </div>

    
    <script src="javascripts/application.js"></script>
  </body>
</html>
